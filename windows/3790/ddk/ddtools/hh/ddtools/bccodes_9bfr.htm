<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Bug Check 0xA5:  ACPI_BIOS_ERROR</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="bug check 0xA5">
<META NAME="MS-HKWD" CONTENT="ACPI_BIOS_ERROR">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_bug_check_0xa5_bug"></A>Bug Check 0xA5: ACPI_BIOS_ERROR</H1>

<P>The ACPI_BIOS_ERROR bug check has a value of 0x000000A5. This indicates that the ACPI BIOS of the computer is not fully compliant with the ACPI specification.</P>

<H4>Parameters</H4>

<P>The four bug check parameters are displayed on the blue screen. Parameter&nbsp;1 indicates the nature of the incompatibility. The meaning of the other parameters depends on the value of Parameter&nbsp;1.</P>

<P>If the BIOS incompatibility is related to Plug and Play or Power Management, the following parameters are used.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=9%>Parameter 1</TH>
<TH align=left width=16%>Parameter 2</TH>
<TH align=left width=15%>Parameter 3</TH>
<TH align=left width=16%>Parameter 4</TH>
<TH align=left width=44%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=9%>0x01</TD>
<TD width=16%>ACPI's <B>deviceExtension</B> </TD>
<TD width=15%>ACPI's <B>ResourceList</B> </TD>
<TD width=16%><B>0:</B> No resource list found 
<P><B>1:</B> No IRQ resource found in list </P>
</TD>
<TD width=44%>ACPI cannot find the SCI Interrupt vector in the resources handed to it when ACPI is started.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x02</TD>
<TD width=16%>&nbsp;</TD>
<TD width=15%>&nbsp;</TD>
<TD width=16%>&nbsp;</TD>
<TD width=44%><I>(See the table later on this page)</I> </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x03</TD>
<TD width=16%>The ACPI object that was being run </TD>
<TD width=15%>The return value from the interpreter </TD>
<TD width=16%>The name of the control method (in ULONG format) </TD>
<TD width=44%>ACPI tried to run a control method while creating device extensions to represent the ACPI namespace, but this control method failed.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x04</TD>
<TD width=16%>The ACPI extension to which the _PRW belongs </TD>
<TD width=15%>Pointer to the method </TD>
<TD width=16%>The <B>DataType</B> returned (see <I>amli.h</I>) </TD>
<TD width=44%>ACPI evaluated a _PRW and expected to find an integer as a package element.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x05</TD>
<TD width=16%>The ACPI extension to which the _PRW belongs </TD>
<TD width=15%>Pointer to the _PRW </TD>
<TD width=16%>The number of elements in the _PRW </TD>
<TD width=44%>ACPI evaluated a _PRW, and the package that came back failed to contain at least two elements. The ACPI specification requires that two elements always be present in a _PRW.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x06</TD>
<TD width=16%>The ACPI Extension to which the _PRx belongs </TD>
<TD width=15%>Pointer to the _PRx </TD>
<TD width=16%>Pointer to the name of the object to look for </TD>
<TD width=44%>ACPI tried to find a named object, but could not find it.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x07</TD>
<TD width=16%>The ACPI extension to which the method belongs </TD>
<TD width=15%>Pointer to the method </TD>
<TD width=16%>The <B>DataType</B> returned (see <I>amli.h</I>) </TD>
<TD width=44%>ACPI evaluated a method and expected to receive a buffer in return. However, the method returned some other data type.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x08</TD>
<TD width=16%>The ACPI extension to which the method belongs </TD>
<TD width=15%>Pointer to the method </TD>
<TD width=16%>The <B>DataType</B> returned (see <I>amli.h</I>) </TD>
<TD width=44%>ACPI evaluated a method and expected to receive an integer in return. However, the method returned some other data type.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x09</TD>
<TD width=16%>The ACPI extension to which the method belongs </TD>
<TD width=15%>Pointer to the method </TD>
<TD width=16%>The <B>DataType</B> returned (see <I>amli.h</I>) </TD>
<TD width=44%>ACPI evaluated a method and expected to receive a package in return. However, the method returned some other data type.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x0A</TD>
<TD width=16%>The ACPI Extension to which the method belongs </TD>
<TD width=15%>Pointer to the method </TD>
<TD width=16%>The <B>DataType</B> returned (see <I>amli.h</I>) </TD>
<TD width=44%>ACPI evaluated a method and expected to receive a string in return. However, the method returned some other data type.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x0B</TD>
<TD width=16%>The ACPI Extension to which which the _EJD belongs </TD>
<TD width=15%>The status returned by the interpreter </TD>
<TD width=16%>The name of the object ACPI is trying to find </TD>
<TD width=44%>ACPI cannot find the object referenced by an _EJD string.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x0C</TD>
<TD width=16%>The ACPI extension for which ACPI found a dock device </TD>
<TD width=15%>Pointer to the _EJD method </TD>
<TD width=16%><B>0:</B> BIOS does not claim system is dockage 
<P><B>1:</B> Duplicate device extensions for dock device </P>
</TD>
<TD width=44%>ACPI provides faulty or insufficient information for dock support.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x0D</TD>
<TD width=16%>The ACPI extension that ACPI needs the object for </TD>
<TD width=15%>The (ULONG) name of the method ACPI looked for </TD>
<TD width=16%><B>0:</B> Base case 
<P><B>1:</B> Conflict </P>
</TD>
<TD width=44%>ACPI could not find a required method or object in the namespace This bug check code is used if there is no _HID or _ADR present.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x0E</TD>
<TD width=16%>The NS <B>PowerResource</B> that ACPI needs the object for </TD>
<TD width=15%>The (ULONG) name of the method ACPI looked for </TD>
<TD width=16%>0: Base case </TD>
<TD width=44%>ACPI could not find a required method or object in the namespace for a power resource (or entity other than a "device"). This bug check code is used if there is no _ON, _OFF, or _STA present for a power resource.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x0F</TD>
<TD width=16%>The current buffer that ACPI was parsing </TD>
<TD width=15%>The buffer's tag </TD>
<TD width=16%>The specified length of the buffer </TD>
<TD width=44%>ACPI could not parse the resource descriptor.   </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x10</TD>
<TD width=16%>&nbsp;</TD>
<TD width=15%>&nbsp;</TD>
<TD width=16%>&nbsp;</TD>
<TD width=44%><I>(See the table later on this page)</I> </TD>
</TR>

<TR VALIGN="top">
<TD width=9%>0x11</TD>
<TD width=16%>&nbsp;</TD>
<TD width=15%>&nbsp;</TD>
<TD width=16%>&nbsp;</TD>
<TD width=44%><I>(See the table later on this page)</I> </TD>
</TR>
</TABLE><BR>

<P>If an interrupt routing failure or incompatibility has occurred, the following parameters are used.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=13%>Parameter 1</TH>
<TH align=left width=17%>Parameter 2</TH>
<TH align=left width=18%>Parameter 3</TH>
<TH align=left width=19%>Parameter 4</TH>
<TH align=left width=33%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=13%>0x2001</TD>
<TD width=17%><B>InterruptModel</B> (integer) </TD>
<TD width=18%>The return value from the interpreter </TD>
<TD width=19%>Pointer to the PIC control method </TD>
<TD width=33%>ACPI tried to evaluate the PIC control method and but failed.   </TD>
</TR>

<TR VALIGN="top">
<TD width=13%>0x10001</TD>
<TD width=17%>Pointer to the device object </TD>
<TD width=18%>Pointer to the parent of the device object </TD>
<TD width=19%>Pointer to the _PRT object
<P>(See Comments below) </P>
</TD>
<TD width=33%>ACPI tried to do interrupt routing, but failed.   </TD>
</TR>

<TR VALIGN="top">
<TD width=13%>0x10002</TD>
<TD width=17%>Pointer to the device object </TD>
<TD width=18%>Pointer to the string name ACPI was are looking for, but could not find </TD>
<TD width=19%>Pointer to the _PRT object
<P>(See Comments below) </P>
</TD>
<TD width=33%>ACPI could not find the link node referenced in a _PRT.   </TD>
</TR>

<TR VALIGN="top">
<TD width=13%>0x10003</TD>
<TD width=17%>Pointer to the device object </TD>
<TD width=18%>The Device ID / function number.
<P>This DWORD is encoded as follows: bits 5:0 are the PCI device number, and bits 8:6 are the PCI function number </P>
</TD>
<TD width=19%>Pointer to the _PRT object
<P>(See Comments below) </P>
</TD>
<TD width=33%>ACPI could not find a mapping in the _PRT package for a device.   </TD>
</TR>

<TR VALIGN="top">
<TD width=13%>0x10005</TD>
<TD width=17%>Pointer to the _PRT object
<P>(See Comments below) </P>
</TD>
<TD width=18%>Pointer to the current _PRT element 
<P>(This is an index into the _PRT) </P>
</TD>
<TD width=19%>The Device ID / function number.
<P>This DWORD is encoded as follows: bits 15:0 are the PCI function number, and bits 31:16 are the PCI device number </P>
</TD>
<TD width=33%>ACPI found an entry in the _PRT for which the function ID is not all F's.
<P>(The generic format for a _PRT entry is that the device number is specified, but the function number is not.)   </P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=13%>0x10006</TD>
<TD width=17%>Pointer to the link node
<P>(This device is missing the _DIS method) </P>
</TD>
<TD width=18%>0 </TD>
<TD width=19%>0 </TD>
<TD width=33%>ACPI found a link node, but cannot disable it.
<P>(Link nodes must be disabled to allow for reprogramming.)   </P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=13%>0x10007</TD>
<TD width=17%>The vector that couldn't be found </TD>
<TD width=18%>0 </TD>
<TD width=19%>0 </TD>
<TD width=33%>The _PRT contained a reference to a vector not described in the I/O APIC entry's MAPIC table.   </TD>
</TR>
</TABLE><BR>

<P>If a miscellaneous failure or incompatibility has occurred, the following parameters are used.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=13%>Parameter 1</TH>
<TH align=left width=16%>Parameter 2</TH>
<TH align=left width=16%>Parameter 3</TH>
<TH align=left width=16%>Parameter 4</TH>
<TH align=left width=39%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=13%>0x20000</TD>
<TD width=16%>The I/O port in the Fixed Table </TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=39%>The PM_TMR_BLK entry in the Fixed ACPI Description Table does not point to a working ACPI timer block.   </TD>
</TR>
</TABLE><BR>

<P>If Parameter&nbsp;1 equals <B>0x02</B>, this means that the ACPI BIOS could not process the resource list for the PCI root buses. In this case, Parameter&nbsp;3 specifies the exact problem, and the remaining parameters can be interpreted as follows.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=18%>Parameter 2</TH>
<TH align=left width=18%>Parameter 3</TH>
<TH align=left width=30%>Parameter 4</TH>
<TH align=left width=34%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=18%>The ACPI extension for the PCI bus</TD>
<TD width=18%>0x0</TD>
<TD width=30%>Pointer to the QUERY_RESOURCES IRP </TD>
<TD width=34%>ACPI cannot convert the BIOS' resource list into the proper Windows format. This probably represents a flaw in the BIOS' list encoding procedure. </TD>
</TR>

<TR VALIGN="top">
<TD width=18%>The ACPI extension for the PCI bus</TD>
<TD width=18%>0x1</TD>
<TD width=30%>Pointer to the QUERY_RESOURCE_REQUIREMENTS IRP</TD>
<TD width=34%>ACPI cannot convert the BIOS' resource list into the proper Windows format. This probably represents a flaw in the BIOS' list encoding procedure. </TD>
</TR>

<TR VALIGN="top">
<TD width=18%>The ACPI extension for the PCI bus</TD>
<TD width=18%>0x2</TD>
<TD width=30%>0 </TD>
<TD width=34%>ACPI found an empty resource list.</TD>
</TR>

<TR VALIGN="top">
<TD width=18%>The ACPI extension for the PCI bus</TD>
<TD width=18%>0x3</TD>
<TD width=30%>Pointer to the PNP CRS descriptor </TD>
<TD width=34%>ACPI could not find the current bus number in the CRS. </TD>
</TR>

<TR VALIGN="top">
<TD width=18%>The ACPI extension for the PCI bus</TD>
<TD width=18%>Pointer to the resource list for PCI </TD>
<TD width=30%>Pointer to the E820 memory table </TD>
<TD width=34%>There is an overlap between the list of resources that PCI claims to decode and the list of memory regions reported by the E820 BIOS interface. (This kind of conflict is never permitted.) </TD>
</TR>
</TABLE><BR>

<P>If Parameter&nbsp;1 equals <B>0x10</B>, this means that the ACPI BIOS could not determine the system-to-device-state mapping correctly. In this case, Parameter&nbsp;3 specifies the exact problem, and the remaining parameters can be interpreted as follows.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=25%>Parameter 2</TH>
<TH align=left width=11%>Parameter 3</TH>
<TH align=left width=28%>Parameter 4</TH>
<TH align=left width=36%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=25%>The ACPI extension whose mapping is needed</TD>
<TD width=11%>0x0</TD>
<TD width=28%>The DEVICE_POWER_STATE (this is "x+1") </TD>
<TD width=36%>The _PRx was mapped back to a non-supported S-state. </TD>
</TR>

<TR VALIGN="top">
<TD width=25%>The ACPI extension whose mapping is needed</TD>
<TD width=11%>0x1</TD>
<TD width=28%>The SYSTEM_POWER_STATE that cannot be mapped </TD>
<TD width=36%>ACPI cannot find a D-state to associate with the S-state. </TD>
</TR>

<TR VALIGN="top">
<TD width=25%>The ACPI extension whose mapping is needed</TD>
<TD width=11%>0x2</TD>
<TD width=28%>The SYSTEM_POWER_STATE that cannot be mapped </TD>
<TD width=36%>The device claims to be able to wake the system when the system is in this S-state, but the system doesn't actually support this S-state. </TD>
</TR>
</TABLE><BR>

<P>If Parameter&nbsp;1 equals <B>0x11</B>, this means that the system could not enter ACPI mode. In this case, Parameter&nbsp;2 specifies the exact problem, and the remaining parameters can be interpreted as follows.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=11%>Parameter 2</TH>
<TH align=left width=16%>Parameter 3</TH>
<TH align=left width=16%>Parameter 4</TH>
<TH align=left width=57%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=11%>0x0</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System could not initialize AML interpreter. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x1</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System could not find RSDT. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x2</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System could not allocate critical driver structures. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x3</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System could not load RSDT. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x4</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System could not load DDBs. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x5</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System cannot connect Interrupt vector. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x6</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>SCI_EN never becomes set in PM1 Control Register. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x7</TD>
<TD width=16%>Pointer to the table that had a bad checksum</TD>
<TD width=16%>Creator revision </TD>
<TD width=57%>Table checksum is incorrect. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x8</TD>
<TD width=16%>Pointer to the table that ACPI failed to load </TD>
<TD width=16%>Creator revision </TD>
<TD width=57%>Failed to load DDB. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x9</TD>
<TD width=16%>FADT version </TD>
<TD width=16%>0 </TD>
<TD width=57%>Unsupported firmware version. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0xA</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System could not find MADT. </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0xB</TD>
<TD width=16%>0 </TD>
<TD width=16%>0 </TD>
<TD width=57%>System could not find any valid Local SAPIC structures in the MADT. </TD>
</TR>
</TABLE><BR>

<H4>Cause</H4>

<P>The error is indicated by the value of Parameter&nbsp;1.</P>

<H4>Resolving the Problem</H4>

<P>If you are debugging this error, use the <B>!analyze -v</B> extension command. This will display all the relevant data — device extensions, nsobjects, or whatever is appropriate to the specific error.</P>

<P>If you are not performing debugging, this error indicates that you need to obtain a new BIOS. Contact your vendor or visit the internet to get a new BIOS.   </P>

<P>If you are unable to obtain an updated BIOS, or the latest BIOS supplied by your vendor is still not ACPI compliant, you can turn off ACPI mode during text-mode setup. To do this, simply press the F7 key when you are prompted to install storage drivers. The system will not notify you that the F7 key was pressed, but it will silently disable ACPI and allow you to continue your installation.</P>

<H4>Comments</H4>

<P>A PCI routing table (_PRT) is the ACPI BIOS object that specifies how all the PCI devices are connected to the interrupt controllers. A machine with multiple PCI busses may have multiple _PRTs.</P>

<P>A _PRT can be displayed in the debugger by using the <B>!acpikd.nsobj</B> extension command with the address of the _PRT object as its argument.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Bug%20Check%200xA5:%20%20ACPI_BIOS_ERROR"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
