<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DDPIXELFORMAT</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DDPIXELFORMAT">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_fourcc_gg_gly">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_fourcc_gg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ddpixelformat_gg"></A>DDPIXELFORMAT</H1>

<P>The DDPIXELFORMAT structure describes the pixel format of a DirectDrawSurface object. </P>

<PRE class=syntax>typedef struct _DDPIXELFORMAT {
  DWORD  dwSize;
  DWORD  dwFlags;
  DWORD  dwFourCC;
union {
  DWORD  dwRGBBitCount;
  DWORD  dwYUVBitCount;
  DWORD  dwZBufferBitDepth;
  DWORD  dwAlphaBitDepth;
  DWORD  dwLuminanceBitCount;
  DWORD  dwBumpBitCount;
  DWORD  dwPrivateFormatBitCount;
} ;
union {
  DWORD  dwRBitMask;
  DWORD  dwYBitMask;
  DWORD  dwStencilBitDepth;
  DWORD  dwLuminanceBitMask;
  DWORD  dwBumpDuBitMask;
  DWORD  dwOperations;
} ;
union {
  DWORD  dwGBitMask;
  DWORD  dwUBitMask;
  DWORD  dwZBitMask;
  DWORD  dwBumpDvBitMask;
  struct {
    WORD wFlipMSTypes;
    WORD wBltMSTypes;
  } MultiSampleCaps;
} ;
union {
  DWORD  dwBBitMask;
  DWORD  dwVBitMask;
  DWORD  dwStencilBitMask;
  DWORD  dwBumpLuminanceBitMask;
} ;
union {
  DWORD  dwRGBAlphaBitMask;
  DWORD  dwYUVAlphaBitMask;
  DWORD  dwLuminanceAlphaBitMask;
  DWORD  dwRGBZBitMask;
  DWORD  dwYUVZBitMask;
} ;
} DDPIXELFORMAT, FAR* LPDDPIXELFORMAT;</PRE>

<H4>Members</H4>

<DL>
<DT><B>dwSize</B> </DT>

<DD>Specifies the size in bytes of the DDPIXELFORMAT structure. The driver must initialize this member before the structure is used.

<P><B>DirectX 9.0 and later versions only.<BR>
</B>Specifies, on input, the version of the DirectX runtime being used by the application. This member is set to DD_RUNTIME_VERSION, which is 0x00000900 for DirectX 9.0, in the <B>format</B> member of the <A HREF="d3dstrct_95pk.htm">DD_GETFORMATDATA</A> structure for a <A HREF="d3dstrct_2ucn.htm#ddk_d3dgdi2_type_getformat_gg">D3DGDI2_TYPE_GETFORMAT</A> query.
</DD>

<DT><B>dwFlags</B> </DT>

<DD>Indicates a set of flags that specify optional control flags. This member is a bitwise OR of any of the following values:

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Flag</TH>
<TH align=left width=52%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_ALPHA</TD>
<TD width=52%>The pixel format describes an alpha-only surface.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_ALPHAPIXELS</TD>
<TD width=52%>The surface has alpha channel information in the pixel format.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_ALPHAPREMULT</TD>
<TD width=52%>The color components in the pixel are premultiplied by the alpha value in the pixel. If this flag is set, the DDPF_ALPHAPIXELS flag must also be set. If this flag is not set but the DDPF_ALPHAPIXELS flag is set, the color components in the pixel format are not premultiplied by alpha. In this case, the color components must be multiplied by the alpha value at the time that an alpha-blending operation is performed.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_BUMPDUDV</TD>
<TD width=52%>Bump map dUdV data in the pixel format is valid.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_BUMPHEIGHT</TD>
<TD width=52%>Bump map height data in the pixel format is valid.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_COMPRESSED</TD>
<TD width=52%>The surface accepts pixel data in the specified format and compresses it during the write operation.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_D3DFORMAT</TD>
<TD width=52%>Indicates a DirectX 8.0 and later format capability entry in the texture format list. This flag is not exposed to applications.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_FOURCC</TD>
<TD width=52%>The <A HREF="JavaScript:hhobj_1.Click()">FOURCC</A> code is valid.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_LUMINANCE</TD>
<TD width=52%>Luminance data in the pixel format is valid. Use this flag for luminance-only or luminance-plus-alpha surfaces; the bit depth is then specified in the <B>dwLuminanceBitCount</B> member.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_LUMINANCEPIXELS</TD>
<TD width=52%>Luminance data in the pixel format is valid. Use this flag when hanging luminance off, for example, bumpmap surfaces. The bit mask for the luminance portion of the pixel is then specified in the <B>dwBumpLuminanceBitMask</B> member.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_NOVEL_TEXTURE_FORMAT</TD>
<TD width=52%>Indicates a new surface format that the runtime might not expose to all applications.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_PALETTEINDEXED1</TD>
<TD width=52%>The surface is 1-bit color indexed.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_PALETTEINDEXED2</TD>
<TD width=52%>The surface is 2-bit color indexed.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_PALETTEINDEXED4</TD>
<TD width=52%>The surface is 4-bit color indexed.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_PALETTEINDEXED8</TD>
<TD width=52%>The surface is 8-bit color indexed.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_PALETTEINDEXEDTO8</TD>
<TD width=52%>The surface is 1-, 2-, or 4-bit color indexed to an 8-bit palette.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_RGB</TD>
<TD width=52%>The RGB data in the pixel format structure is valid.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_RGBTOYUV</TD>
<TD width=52%>The surface accepts RGB data and translates it during the write operation to YUV data. The format of the data to be written is contained in the pixel format structure. The DDPF_RGB flag is set.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_STENCILBUFFER</TD>
<TD width=52%>The surface encodes stencil and depth information in each pixel of the z-buffer.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_YUV</TD>
<TD width=52%>The YUV data in the pixel format structure is valid.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_ZBUFFER</TD>
<TD width=52%>The pixel format describes a z-buffer-only surface.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDPF_ZPIXELS</TD>
<TD width=52%>The surface is in RGBZ format.</TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>dwFourCC</B> </DT>

<DD>Specifies a surface format code including any of the codes in the D3DFORMAT enumerated type. Some <A HREF="JavaScript:hhobj_2.Click()">FOURCC</A> codes are part of D3DFORMAT. For more information on D3DFORMAT, see the SDK documentation. Hardware vendors can also define and supply format codes that are specific to their hardware. </DD>

<DT><B>dwRGBBitCount</B> </DT>

<DD>Specifies the number of RGB bits per pixel (4, 8, 16, 24, or 32). </DD>

<DT><B>dwYUVBitCount</B> </DT>

<DD>Specifies the number of YUV bits per pixel. </DD>

<DT><B>dwZBufferBitDepth</B> </DT>

<DD>Specifies the Z-buffer bit depth (8, 16, 24, or 32 bits). </DD>

<DT><B>dwAlphaBitDepth</B> </DT>

<DD>Specifies the Alpha channel bit depth. </DD>

<DT><B>dwLuminanceBitCount</B></DT>

<DD>Specifies the number of bits per pixel.</DD>

<DT><B>dwBumpBitCount</B></DT>

<DD>Specifies the total number of bits per "bumpel" (bump-map texel).</DD>

<DT><B>dwPrivateFormatBitCount</B></DT>

<DD>Specifies the bits per pixel of a pixel format private to the driver (that is, not one of the standard ones defined by Direct3D).</DD>

<DT><B>dwRBitMask</B> </DT>

<DD>Specifies the mask for red bits. </DD>

<DT><B>dwYBitMask</B> </DT>

<DD>Specifies the mask for Y bits. </DD>

<DT><B>dwStencilBitDepth</B></DT>

<DD>Specifies the bit depth of the stencil buffer. This member specifies how many bits are reserved within each pixel of the z-buffer for stencil information.</DD>

<DT><B>dwLuminanceBitMask</B></DT>

<DD>Specifies the mask for luminance bits.</DD>

<DT><B>dwBumpDuBitMask</B></DT>

<DD>Specifies the mask for bump map U delta bits.</DD>

<DT><B>dwOperations</B></DT>

<DD>Specifies the intended operations that can be performed on surfaces with this pixel format, for example, whether such surfaces can be used as textures, bump environment maps, cube maps, volume textures, or render targets. The operations that can be reported are as follows:

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Operation</TH>
<TH align=left width=52%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_TEXTURE</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as MIP mapped textures.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_VOLUMETEXTURE</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as volume textures. Please note, that this flag is independent of D3DFORMAT_OP_TEXTURE. Thus, it is possible to specify a pixel format that can only be used for volume textures and not for conventional, MIP mapped textures.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_CUBETEXTURE</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as cubic environment map textures. Please note, that this flag is independent of D3DFORMAT_OP_TEXTURE. Thus, it is possible to specify a pixel format that can only be used for cubic environment map textures and not for conventional, MIP mapped textures.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_OFFSCREEN_RENDERTARGET</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as an offscreen render target regardless of the pixel format of the display mode (providing the pixel format of the current display mode was reported with the D3DFORMAT_OP_DISPLAYMODE and D3DFORMAT_OP_3DACCELERATION). If the pixel format of the current display mode did not have these flags set it indicates no 3D acceleration is available in this mode even if the render target is offscreen. This flag can be combined with D3DFORMAT_OP_TEXTURE to indicate that the device can render to textures of the specified pixel format.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_SAME_FORMAT_RENDERTARGET</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as render targets but only when the pixel format of the surface matches the pixel format of the current display mode. This flag does not only apply to offscreen render target but can be specified on the pixel formats of display modes to indicate rendering target capability. This flag can be combined with D3DFORMAT_OP_TEXTURE to indicate that the device can render to textures of the specified pixel format.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_ZSTENCIL</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as Z/Stencil buffers but only if the depth of the Z/Stencil surface matches the color depth of the rendering target to which the depth buffer is attached. When deciding on a match between Z/Stencil and color buffer depth, the pixel stride is used.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_ZSTENCIL_WITH_ARBITRARY_COLOR_DEPTH</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as Z/Stencil buffers regardless of the color depth of the render target to which the surface is attached. When specifying this flag you also should specify D3DFORMAT_OP_ZSTENCIL.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_SAME_FORMAT_UP_TO_ALPHA_RENDERTARGET</TD>
<TD width=52%>When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as a render target if the current display mode is the same depth, if the alpha channel is ignored. For example, if the device can render to A8R8G8B8 when the display mode is X8R8G8B8, then the format operation list entry for A8R8G8B8 should have this flag set.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_DISPLAYMODE</TD>
<TD width=52%>When this flag is specified, it indicates that there is a display mode with this pixel format that has DirectDraw support (including Flip). This flag should not be set on alpha formats.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_3DACCELERATION</TD>
<TD width=52%>When this flag is specified, the graphics accelerator can support some level of Direct3D acceleration when in a display mode with this pixel format and also implies that the driver can create a context in this mode (for some render target format). This flag must only be used when reporting display mode formats (by specifying the D3DFORMAT_OP_DISPLAYMODE). It is not required and indeed should not be set when reporting offscreen render targets formats.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_PIXELSIZE</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that the driver filled in the bits per pixel for the format in the <B>dwPrivateFormatBitCount</B> member. <BR>
If the driver requires that managed surfaces and textures use a private format (a format that is understood by the driver but not natively by the Direct3D runtime), then the driver must specify this flag, along with the pixel size in <B>dwPrivateFormatBitCount</B>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><A NAME="ddk_d3dformat_op_convert_to_argb_gg"></A>D3DFORMAT_OP_CONVERT_TO_ARGB</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that source surfaces of this format can be converted to any target surface with an RGB pixel format that has the <A HREF="#ddk_d3dformat_memberofgroup_argb_gg">D3DFORMAT_MEMBEROFGROUP_ARGB</A> flag specified in <B>dwOperations</B>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_OFFSCREENPLAIN</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that the driver can stretch to and from and color fill surfaces of this format.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_SRGBREAD</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that surfaces of this format can be read from as SRGB textures (that is, the sampler linearizes the looked up data).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_BUMPMAP</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that surfaces of this format can be used as bump environment map textures.<BR>
Note that this flag is independent of D3DFORMAT_OP_TEXTURE. Therefore, you can specify a pixel format that can only be used for bump environment map textures and not for conventional MIP mapped textures.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_DMAP</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that surfaces of this format can be sampled by the displacement map sampler.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_NOFILTER</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that surfaces of this format cannot be used with texture filtering.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><A NAME="ddk_d3dformat_memberofgroup_argb_gg"></A>D3DFORMAT_MEMBEROFGROUP_ARGB</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that target surfaces of this format can be converted from any source surface with a pixel format that has the <A HREF="#ddk_d3dformat_op_convert_to_argb_gg">D3DFORMAT_OP_CONVERT_TO_ARGB</A> flag specified in <B>dwOperations</B>.<BR>
The driver can only specify this flag for ARGB surfaces with at least 5 bits color information per channel. That is, the D3DFMT_A1R5G5B5 format is valid. However, the D3DFMT_A4R4G4B4 format is invalid. If the driver specifies this flag with an invalid format, the runtime prevents the Direct3D HAL from loading. Note that although this flag indicates ARGB formats, the runtime also allows the driver to specify surfaces with XRGB formats (for example, D3DFMT_X1R5G5B5).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_SRGBWRITE</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that surfaces of this format can be written to as SRGB targets (that is, the pixel pipe delinearizes data on output to this format).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_NOALPHABLEND</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that surfaces of this format cannot be used with alpha blending.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_AUTOGENMIPMAP</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that the sublevels of MIP-map textures with this format can be automatically generated. To receive <A HREF="d3denum_0jon.htm#ddk_d3ddp2op_generatemipsublevels_gg">D3DDP2OP_GENERATEMIPSUBLEVELS</A> operation requests, this flag must be exposed. </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>D3DFORMAT_OP_VERTEXTEXTURE</TD>
<TD width=52%><B>DirectX 9.0 and later versions only.</B><BR>
When this flag is specified in a pixel format, it indicates that surfaces of this format can be used by a vertex texture sampler. That is, only surfaces of this format can be used as vertex textures. </TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>dwGBitMask</B> </DT>

<DD>Specifies the mask for green bits. </DD>

<DT><B>dwUBitMask</B> </DT>

<DD>Specifies the mask for U bits. </DD>

<DT><B>dwZBitMask</B></DT>

<DD>Specifies the mask for Z bits.</DD>

<DT><B>dwBumpDvBitMask</B></DT>

<DD>Specifies the mask for bump map V delta bits.</DD>

<DT><B>MultiSampleCaps</B></DT>

<DD>Structure that contains the following two members. It specifies 16-bit masks for the number of samples per pixel for both flip (fullscreen) and blt (windowed) multisampling. It is used when specifying surfaces that can be used when performing multisample rendering (see Comments). Each bit in these 16-bit masks indicates support of multisampling with a specific number of samples. For example, bit 0 indicates the support of multisampling with only a single sample, bit 1 indicates the support of multisampling with two samples, bit 2 indicates the support of multisampling with three samples, and so on. The driver can indicate more than one supported level by combining the bits using a bitwise OR (see Comments).</DD>

<DT><B>wFlipMSTypes</B></DT>

<DD>Specifies a 16-bit mask for fullscreen multisampling.</DD>

<DT><B>wBltMSTypes</B></DT>

<DD>Specifies a 16-bit mask for windowed multisampling.</DD>

<DT><B>dwBBitMask</B> </DT>

<DD>Specifies the mask for blue bits. </DD>

<DT><B>dwVBitMask</B> </DT>

<DD>Specifies the mask for V bits. </DD>

<DT><B>dwStencilBitMask</B></DT>

<DD>Specifies the mask for stencil bits within each z-buffer pixel.</DD>

<DT><B>dwBumpLuminanceBitMask</B></DT>

<DD>Specifies the mask for luminance in a bump map.</DD>

<DT><B>dwRGBAlphaBitMask</B>, <B>dwYUVAlphaBitMask</B> </DT>

<DD>Specify the masks for alpha channel. </DD>

<DT><B>dwLuminanceAlphaBitMask</B></DT>

<DD>Specifies the mask for luminance in the alpha channel.</DD>

<DT><B>dwRGBZBitMask</B>, <B>dwYUVZBitMask</B> </DT>

<DD>Specify the masks for the z channel. 
</DD>
</DL>



<H4>Headers</H4>

<P>Defined in <I>ddraw.h.</I> Include <I>ddraw.h</I>.</P>

<H4>Comments</H4>

<P>The runtime now imposes some rules on the operation (op) list. The current rules are:

<UL>
	<LI>Only one Endian-ness (big or little) for any DS format is allowed, for example D15S1 or S1D15, not both independent of other bits.</LI>

	<LI>A list should only include D3DFORMAT_OP_DISPLAYMODE for exactly one 16bpp format (for example it should not enumerate 5:5:5 and 5:6:5).</LI>

	<LI>A list should not contain any alpha formats with D3DFORMAT_OP_DISPLAYMODE or D3DFORMAT_OP_3DACCELLERATION set.</LI>

	<LI>Make sure no mode has D3DFORMAT_OP_3DACCELLERATION set that does not also have D3DFORMAT_OP_DISPLAYMODE set.</LI>
</UL>

<P>If the driver supports a lockable D16, it should report D3DFMT_D16_LOCKABLE in the op list; otherwise, it should report D3DFMT_D16.</P>

<P>Drivers supporting multisampling must fill in the <B>MultiSampleCaps</B> in the Depth/Stencil formats for which multisampling can be supported. This allows the runtime to detect if a driver supports multisampling for combinations of render target and Z buffer formats. For additional information about the restrictions related to stretch blt multisampling, see the description of D3DPRASTERCAPS_STRETCHBLTMULTISAMPLE cap in the rastercaps contained in the D3DCAPS8 structure in the SDK documentation.</P>

<P>The enumerated type D3DMULTISAMPLE_TYPE defined in <I>d3d8types.h</I> is used when setting the bits in <B>wFlipMSTypes</B> and <B>wBltMSTypes</B>. To specify support for a specific number of samples per pixel, simply logically shift 1 by the appropriate value from the D3DMULTISAMPLE_TYPE enumerated type less 1 and OR this into the appropriate field (<B>wFlipMSTypes</B> and <B>wBltMSTypes</B>).</P>

<P>For example, if the driver supports both two and four samples per pixel when flipping (fullscreen mode) and four samples per pixel when blitting (windowed mode) on X8R8G8B8 surface the following entry would be reported in the surface format list.</P>

<PRE>DDPIXELFORMAT ddpf;
ZeroMemory(&amp;ddpf, sizeof(ddpf));
ddpf.dwSize       = sizeof(DDPIXELFORMAT);
ddpf.dwFlags      = DDPF_D3DFORMAT;
ddpf.dwFourCC     = D3DFMT_X8R8G8B8;
ddpf.dwOperations = D3DFORMAT_OP_DISPLAYMODE |
                    D3DFORMAT_OP_3DACCELERATION;
ddpf.MultiSampleCaps.wFlipMSTypes = (1 &lt;&lt; (D3DMULTISAMPLE_4_SAMPLES – 1))
                                  | (1 &lt;&lt; (D3DMULTISAMPLE_2_SAMPLES – 1));
ddpf.MultiSampleCaps.wBltMSTypes = (1 &lt;&lt; (D3DMULTISAMPLE_4_SAMPLES – 1));</PRE>

<P>It is not necessary to specify 1 &lt;&lt; (D3DMULTISAMPLE_NONE - 1) when reporting formats. It is assumed that any format reported can also be used without multisampling. If the hardware supports multisample rendering with a z-buffer the z-buffer formats reported should also include the supported samples-per-pixels.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DDPIXELFORMAT"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
